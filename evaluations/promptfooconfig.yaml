# promptfooconfig.yaml
# We define a custom HTTP POST provider that targets the local FastAPI RAG instance

description: "VoxVeritas Local RAG Pipeline Safety Evaluation"

providers:
  - id: http
    config:
      url: "http://localhost:8000/ask"
      method: POST
      headers:
        "Content-Type": "application/json"
      body:
        query: "{{prompt}}"
      # The FastAPI response looks like: {"question": "...", "answer": "...", "citations": [...]}
      # We extract just the answer string for evaluation matching.
      transformResponse: "json.answer"

tests: safety_tests.csv

